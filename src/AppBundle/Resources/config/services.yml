imports:
    - { resource: services/authentication.yml }
    - { resource: services/controllers.yml }
    - { resource: services/menus.yml }
    - { resource: services/presentations.yml }
    - { resource: services/security.yml }

services:
    app.repository.screen:
        class: AppBundle\Repository\ScreenRepository
        arguments:
            $em: "@doctrine.orm.entity_manager"

    app.screenassociation:
        class: AppBundle\Service\ScreenAssociation
        arguments:
            $em: "@doctrine.orm.entity_manager"
            $tokenStorage: "@security.token_storage"

    app.scheduler:
        class: AppBundle\Service\SchedulerService
        arguments:
            $em: "@doctrine.orm.entity_manager"
            $tokenStorage: "@security.token_storage"

    app.filepool:
        class: AppBundle\Service\FilePool
        arguments:
            $basepath: "%path_pool%"

    app.filepool.permission_checker:
        class: AppBundle\Service\FilePoolPermissionChecker

    app.filepool.url_builder:
        class: AppBundle\Service\FilePoolUrlBuilder
        arguments:
            $basePath: "%path_pool%"
            $router: "@router"

    app.apiroleregistry:
        class: AppBundle\Service\ApiRoleRegistry

    app.registration.listener:
        class: AppBundle\EventListener\RegistrationListener
        arguments:
            $router: "@router.default"
        tags:
            - { name: kernel.event_subscriber }

    app.form.type.owner:
        class: AppBundle\Form\Type\OwnerType
        arguments:
            $em: "@doctrine.orm.entity_manager"
            $tokenStorage: "@security.token_storage"
        tags:
            - { name: form.type }

    app.form.type.apikeyform:
        class: AppBundle\Form\ApiKeyForm
        arguments:
            $em: "@doctrine.orm.entity_manager"
            $tokenStorage: "@security.token_storage"
        tags:
            - { name: form.type }

    app.serializer.subscriber.slides:
        class: AppBundle\Serializer\Subscriber\SlideDeserializerSubscriber
        tags:
            - jms_serializer.event_subscriber

    app.pool.access_denied_handler:
        class: AppBundle\Component\Event\AccessDeniedHandler

    app.version_checker:
        class: AppBundle\Service\VersionChecker
