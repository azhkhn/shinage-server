imports:
  - "services/services.yml"
  - "services/setup.yml"
  - "services/transform.yml"

services:
  _defaults:
    public: true

  behat.mink:
    class: Behat\MinkExtension\Context\MinkContext

#  shinage.server.behat.context.hook.purge:
#    class: shinage\server\behat\Hook\PurgeContext
#    arguments:
#      - "@doctrine.orm.entity_manager"
#      - "%swiftmailer.spool.default.file.path%"

  shinage.server.behat.context.api.v1.file_pool:
    class: shinage\server\behat\Api\v1\FilePoolContext
    arguments:
      - '@Tests\Behat\Client\ApiV1ClientContext'

  shinage.server.behat.context.api.v1.presentations:
    class: shinage\server\behat\Api\v1\PresentationsContext
    arguments:
      - '@Tests\Behat\Client\ApiV1ClientContext'
      - "@doctrine.orm.entity_manager"

  shinage.server.behat.context.api.v1.schedule:
    class: shinage\server\behat\Api\v1\ScheduleContext
    arguments:
      - '@Tests\Behat\Client\ApiV1ClientContext'
      - "@doctrine.orm.entity_manager"

  shinage.server.behat.context.heartbeat:
    class: shinage\server\behat\HeartbeatContext
    arguments:
      - "@test.client"

  shinage.server.behat.context.presentation:
    class: shinage\server\behat\PresentationContext
    arguments:
      - "@doctrine.orm.entity_manager"
      - "@test.client"

  shinage.server.behat.context.login:
    class: shinage\server\behat\LoginContext
    arguments:
      - "@fos_user.user_manager"
      - "@session"
      - "main"

  shinage.server.behat.context.registration:
    class: shinage\server\behat\RegistrationContext

  shinage.server.behat.context.general_webpages:
    class: shinage\server\behat\GeneralWebpagesContext

  shinage.server.behat.context.presentation_editors:
    class: shinage\server\behat\PresentationEditorsContext

  shinage.server.behat.context.account_security:
    class: shinage\server\behat\AccountSecurityContext

  shinage.server.behat.context.mail:
    class: shinage\server\behat\MailContext
    arguments:
      - "%swiftmailer.spool.default.file.path%"

  shinage.server.behat.context.cli.screen_alarming:
    class: shinage\server\behat\CLI\ScreenAlarmingContext
    arguments:
      - "@kernel"
